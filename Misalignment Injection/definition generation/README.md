# Misalignment Injection: Definition Generation

This directory constructs training data for **misaligned descriptions**, simulating semantic gaps between ontology axioms and their corresponding natural language definitions. This is a key component of the misalignment injection pipeline proposed in our paper.

## ğŸ“ Directory Structure

```
â”œâ”€â”€ Axiom_per_entity/         # Axioms grouped by ontology term
â”œâ”€â”€ Batchinput/               # GPT input prompts (batched)
â”œâ”€â”€ Batchoutput/              # Raw GPT completions (responses)
â”œâ”€â”€ Ontology/                 # Source ontology files (.owl)
â”œâ”€â”€ Ontology_description/     # Extracted existing descriptions from ontologies
â”œâ”€â”€ generated description/    # Final, post-processed descriptions generated by GPT
â”œâ”€â”€ C_example.txt             # Example description for classes
â”œâ”€â”€ P_example.txt             # Example description for properties
â”œâ”€â”€ description_extraction.py     # Extracts existing rdfs:comment/description annotations
â”œâ”€â”€ description_generation.py     # Uses GPT API to generate new definitions using axiom context
â”œâ”€â”€ description_postprocessing.py # Cleans GPT output and saves to usable format
```


## ğŸ”„ Workflow

### 1. Extract Descriptions

- **File**: `description_extraction.py`  
- **Purpose**: Parses ontology files in the `Ontology/` folder and extracts existing natural language descriptions (e.g., `rdfs:comment`) for each class and property.
- **Output**: Saved in `Ontology_description/`.

### 2. Generate Descriptions via GPT

- **File**: `description_generation.py`  
- **Purpose**: For each ontology term (class/property), uses its logical axioms and examples (`C_example.txt`, `P_example.txt`) to create GPT prompts and request generated descriptions.
- **Output**: Stored in `Batchoutput/`.

### 3. Post-process GPT Outputs

- **File**: `description_postprocessing.py`  
- **Purpose**: Converts raw GPT outputs into structured, cleaned definitions.
- **Output**: Saved in `generated description/`, ready for downstream training or evaluation.

